<!-- toc -->

简单来说，DOF 中有两种方式来使用缓存：「ORM 存储缓存」和「自定义缓存」。

> 说明：两者底层对缓存的操作都是一样。

## ORM 存储缓存

### 开启 ORM 缓存

默认情况下，ORM 存储类均未使用缓存。根据优先级从高到低，开启 ORM 缓存有以下两种方式：

#### 通过 ORM 类注解 `Cache`

如果某个 ORM 存储类的类注解中包含了 `Cache` 注解，且注解参数为 `1`，即 `@Cache(1)`，则该 ORM 类所有框架自身提供的的数据库操作均会使用缓存管理。

#### 通过环境变量 `ENABLE_ORM_CACHE`

如果某个 ORM 存储类的类注解中不包含了 `Cache` 注解，那么 DOF 还回去按：先到当前 ORM 类所在的领域内环境变量，再到全局的环境变量中查找配置项 `ENABLE_ORM_CACHE` 选项是否打开——即 `ENABLE_ORM_CACHE` 是否为 `true` 或者 `1`。

如果 `ENABLE_ORM_CACHE` 选项打开，那么该 ORM 类所有框架自身提供的的数据库操作也均会使用缓存管理。

### 配置缓存驱动

## 自定义缓存

## 注意事项

### ORM 缓存管理的地方要求唯一

要在 DOF 框架中正确使用 ORM 缓存，有个非常重要的条件就是 ORM 对应的数据库表的所有操作权限只有当前的 DOF 应用程序自己。

原因很简单，如果实际使用中同一张数据库表有很多项目都可以增删改查，那么其中某一个项目的缓存管理其实是无效的，一定会出现数据不一致带来的问题。
