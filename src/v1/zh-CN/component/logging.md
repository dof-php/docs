## DOF 日志设计目标

- DOF 日志记录设计时候就需要考虑好，如何方便各种被工具收集和统计分析。

- DOF 日志只统计 PHP 处理后端逻辑所耗费的时间，而不统计响应时间，因为响应时间会受程序自身以外的各种环境因素所影响。

## HTTP 请求日志统计指标

- 每分钟/小时/日/周/月 HTTP API 请求总数
- 每分钟/小时/日/周/月 HTTP API 错误次数
- 每分钟/小时/日/周/月 HTTP API 异常次数
- 每分钟/小时/日/周/月 HTTP API 最快处理时间
- 每分钟/小时/日/周/月 HTTP API 最慢处理时间
- 每分钟/小时/日/周/月 HTTP API 平均处理时间
- 每分钟/小时/日/周/月 HTTP API 每种请求的请求次数
- 每分钟/小时/日/周/月 HTTP API 每种请求的请求平均处理时间
- 每分钟/小时/日/周/月 HTTP API 每种请求的请求最高处理时间
- 每分钟/小时/日/周/月 HTTP API 每种请求的请求最低处理时间
- 每分钟/小时/日/周/月 HTTP API 请求量最大的接口 TOP N 及其对应的平均处理时间
- 每分钟/小时/日/周/月 HTTP API 请求量最低的接口 TOP N 及其对应的平均处理时间

## 其他

- `find` 统计示例

```
# 统计请求数 - 因为 HTTP API 日志每次落地是按行写入的 因此行数可以统计 HTTP API 请求总数
find . -name '*.www.http.fpm-fcgi*.log' | xargs wc -l | tail -1
```
